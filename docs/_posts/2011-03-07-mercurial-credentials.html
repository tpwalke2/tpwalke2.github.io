---
layout: post
title: Mercurial Credentials
date: '2011-03-07T18:00:00.039-05:00'
author: Tom
tags:
- mercurial
modified_time: '2011-03-07T18:00:03.343-05:00'
blogger_id: tag:blogger.com,1999:blog-924733368885081052.post-6465952901856795498
blogger_orig_url: http://www.tpwalke2.com/2011/03/mercurial-credentials.html
---

We are switching to Mercurial from CVS at work to hopefully reduce some of the inefficiencies we encounter when pushing new features into production. My initial impression was not favorable because I had to enter my credentials for every single operation. "I entered my username and password 10 seconds ago. You want them again?"<br /><br />My thoughts then turned to Google. Surely I'm not the only one who is annoyed by this. Sure enough, I wasn't. Before you think I'm violating <a href="http://tpwalke2.blogspot.com/2011/02/intent.html">first principles</a>, bear with me.<br /><br />The <a href="http://stackoverflow.com/questions/2584407/how-to-save-username-and-password-with-mercurial">first way</a> I found was to store my username and password in the mercurial settings file...in the clear. Storing passwords in the clear is <a href="http://techcrunch.com/2009/12/14/rockyou-hack-security-myspace-facebook-passwords/">unacceptable</a>.<br /><br />The next suggestion was to use the <a href="http://tortoisehg.bitbucket.org/manual/1.0/extensions.html">keyring extension</a> that came in the <a href="http://tortoisehg.bitbucket.org/">TortoiseHG </a>install. The keyring extension encrypts passwords before storing them, so you can enter once and not worry about it.<br /><br />The tutorial for <a href="http://tortoisehg.bitbucket.org/manual/1.0/extensions.html">configuring the keyring extension</a> was easy enough to follow. However, we ran into a problem with SSL on our main repository server. Once we put the certificate fingerprint into the mercurial.ini file, we were able to clone from the main server into our local sandboxes.<br /><pre>[paths]<br />default = https://&lt;hostname&gt;/path/to/Repository<br /><br />[hostfingerprints]<br />&lt;hostname&gt; = &lt;certificate&gt;<br /></pre>To get the value for the certificate:<br /><ol><li>Navigate to the path specified for the repository in FireFox.</li><li>Click on the icon to the right of the URL once the page has finished loading.</li><li>Click 'More Information' button.</li><li>Click the 'Security' icon in the dialog that appears.</li><li>Click the 'View Certificate' button.</li><li>Copy the SHA1 Fingerprint value into your mercurial.ini file.</li></ol>